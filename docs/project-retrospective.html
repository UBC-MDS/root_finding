<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>root_finding - Project Retrospective</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">root_finding</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../docs/index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../docs/tutorial.html"> 
<span class="menu-text">Tutorial</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../docs/reference/index.html"> 
<span class="menu-text">Reference</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../docs/project-retrospective.html" aria-current="page"> 
<span class="menu-text">Retrospective</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#keep-doing-what-is-working-and-we-should-continue" id="toc-keep-doing-what-is-working-and-we-should-continue" class="nav-link" data-scroll-target="#keep-doing-what-is-working-and-we-should-continue">Keep Doing: What is working and we should continue?</a>
  <ul class="collapse">
  <li><a href="#pull-request-workflow" id="toc-pull-request-workflow" class="nav-link" data-scroll-target="#pull-request-workflow">1. Pull Request Workflow</a></li>
  <li><a href="#github-actions-for-automated-testing" id="toc-github-actions-for-automated-testing" class="nav-link" data-scroll-target="#github-actions-for-automated-testing">2. GitHub Actions for Automated Testing</a></li>
  <li><a href="#automated-documentation-deployment" id="toc-automated-documentation-deployment" class="nav-link" data-scroll-target="#automated-documentation-deployment">3. Automated Documentation Deployment</a></li>
  <li><a href="#clear-task-division" id="toc-clear-task-division" class="nav-link" data-scroll-target="#clear-task-division">4. Clear Task Division</a></li>
  </ul></li>
  <li><a href="#less-of-what-do-we-want-less-of" id="toc-less-of-what-do-we-want-less-of" class="nav-link" data-scroll-target="#less-of-what-do-we-want-less-of">Less Of: What do we want less of?</a>
  <ul class="collapse">
  <li><a href="#incomplete-initial-setup" id="toc-incomplete-initial-setup" class="nav-link" data-scroll-target="#incomplete-initial-setup">1. Incomplete Initial Setup</a></li>
  <li><a href="#assumptions-about-obvious-things" id="toc-assumptions-about-obvious-things" class="nav-link" data-scroll-target="#assumptions-about-obvious-things">2. Assumptions About “Obvious” Things</a></li>
  <li><a href="#late-documentation-fixes" id="toc-late-documentation-fixes" class="nav-link" data-scroll-target="#late-documentation-fixes">3. Late Documentation Fixes</a></li>
  </ul></li>
  <li><a href="#more-of-what-do-we-want-to-see-more-of" id="toc-more-of-what-do-we-want-to-see-more-of" class="nav-link" data-scroll-target="#more-of-what-do-we-want-to-see-more-of">More Of: What do we want to see more of?</a>
  <ul class="collapse">
  <li><a href="#comprehensive-testing" id="toc-comprehensive-testing" class="nav-link" data-scroll-target="#comprehensive-testing">1. Comprehensive Testing</a></li>
  <li><a href="#user-perspective-in-development" id="toc-user-perspective-in-development" class="nav-link" data-scroll-target="#user-perspective-in-development">2. User Perspective in Development</a></li>
  <li><a href="#proactive-issue-prevention" id="toc-proactive-issue-prevention" class="nav-link" data-scroll-target="#proactive-issue-prevention">3. Proactive Issue Prevention</a></li>
  </ul></li>
  <li><a href="#stop-doing-whats-not-working-and-we-should-stop" id="toc-stop-doing-whats-not-working-and-we-should-stop" class="nav-link" data-scroll-target="#stop-doing-whats-not-working-and-we-should-stop">Stop Doing: What’s not working and we should stop?</a>
  <ul class="collapse">
  <li><a href="#minimal-environment-specifications" id="toc-minimal-environment-specifications" class="nav-link" data-scroll-target="#minimal-environment-specifications">1. Minimal Environment Specifications</a></li>
  <li><a href="#writing-documentation-after-implementation" id="toc-writing-documentation-after-implementation" class="nav-link" data-scroll-target="#writing-documentation-after-implementation">2. Writing Documentation After Implementation</a></li>
  <li><a href="#manual-verification-of-changes" id="toc-manual-verification-of-changes" class="nav-link" data-scroll-target="#manual-verification-of-changes">3. Manual Verification of Changes</a></li>
  </ul></li>
  <li><a href="#start-doing-what-new-things-should-we-try-out" id="toc-start-doing-what-new-things-should-we-try-out" class="nav-link" data-scroll-target="#start-doing-what-new-things-should-we-try-out">Start Doing: What new things should we try out?</a>
  <ul class="collapse">
  <li><a href="#code-quality-tools" id="toc-code-quality-tools" class="nav-link" data-scroll-target="#code-quality-tools">1. Code Quality Tools</a></li>
  <li><a href="#documentation-testing" id="toc-documentation-testing" class="nav-link" data-scroll-target="#documentation-testing">2. Documentation Testing</a></li>
  <li><a href="#complete-dependency-management" id="toc-complete-dependency-management" class="nav-link" data-scroll-target="#complete-dependency-management">3. Complete Dependency Management</a></li>
  <li><a href="#user-testing-before-release" id="toc-user-testing-before-release" class="nav-link" data-scroll-target="#user-testing-before-release">4. User Testing Before Release</a></li>
  <li><a href="#type-hints-and-type-checking" id="toc-type-hints-and-type-checking" class="nav-link" data-scroll-target="#type-hints-and-type-checking">5. Type Hints and Type Checking</a></li>
  </ul></li>
  <li><a href="#key-lessons-learned" id="toc-key-lessons-learned" class="nav-link" data-scroll-target="#key-lessons-learned">Key Lessons Learned</a>
  <ul class="collapse">
  <li><a href="#technical-lessons" id="toc-technical-lessons" class="nav-link" data-scroll-target="#technical-lessons">Technical Lessons</a></li>
  <li><a href="#process-lessons" id="toc-process-lessons" class="nav-link" data-scroll-target="#process-lessons">Process Lessons</a></li>
  <li><a href="#team-lessons" id="toc-team-lessons" class="nav-link" data-scroll-target="#team-lessons">Team Lessons</a></li>
  </ul></li>
  <li><a href="#action-items-for-future-projects" id="toc-action-items-for-future-projects" class="nav-link" data-scroll-target="#action-items-for-future-projects">Action Items for Future Projects</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Project Retrospective</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>This retrospective reflects on our experience developing the <code>root_finding</code> package. We examine what worked well, what could be improved, and what we learned about software development practices.</p>
<hr>
</section>
<section id="keep-doing-what-is-working-and-we-should-continue" class="level2">
<h2 class="anchored" data-anchor-id="keep-doing-what-is-working-and-we-should-continue">Keep Doing: What is working and we should continue?</h2>
<section id="pull-request-workflow" class="level3">
<h3 class="anchored" data-anchor-id="pull-request-workflow">1. Pull Request Workflow</h3>
<p>Our pull request and code review process worked really well. Having team members review each other’s code before merging caught bugs early and helped everyone understand the full codebase, not just their own functions.</p>
<p><strong>Why continue:</strong> Catches issues before they reach main branch, shares knowledge across team.</p>
</section>
<section id="github-actions-for-automated-testing" class="level3">
<h3 class="anchored" data-anchor-id="github-actions-for-automated-testing">2. GitHub Actions for Automated Testing</h3>
<p>Running pytest automatically on every push and PR across multiple Python versions and operating systems was incredibly valuable. It caught platform-specific issues we wouldn’t have found otherwise.</p>
<p><strong>Why continue:</strong> Ensures code quality without manual effort, tests across environments we don’t have locally.</p>
</section>
<section id="automated-documentation-deployment" class="level3">
<h3 class="anchored" data-anchor-id="automated-documentation-deployment">3. Automated Documentation Deployment</h3>
<p>Having documentation automatically build and deploy to GitHub Pages on every merge meant our docs were always up-to-date. We never had to remember to manually rebuild or deploy.</p>
<p><strong>Why continue:</strong> Eliminates manual deployment work, keeps documentation synchronized with code.</p>
</section>
<section id="clear-task-division" class="level3">
<h3 class="anchored" data-anchor-id="clear-task-division">4. Clear Task Division</h3>
<p>Each person taking ownership of specific functions and their tests worked well. It allowed parallel development without stepping on each other’s toes.</p>
<p><strong>Why continue:</strong> Enables efficient parallel work, clear accountability.</p>
<hr>
</section>
</section>
<section id="less-of-what-do-we-want-less-of" class="level2">
<h2 class="anchored" data-anchor-id="less-of-what-do-we-want-less-of">Less Of: What do we want less of?</h2>
<section id="incomplete-initial-setup" class="level3">
<h3 class="anchored" data-anchor-id="incomplete-initial-setup">1. Incomplete Initial Setup</h3>
<p>We started with a minimal <code>environment.yml</code> that only specified Python. This caused problems when peer reviewers tried to run tests and found pytest wasn’t included.</p>
<p><strong>What to reduce:</strong> Starting projects without complete dependency specifications.</p>
<p><strong>Better approach:</strong> Include all development dependencies from the start, even if it feels like “extra work” initially.</p>
</section>
<section id="assumptions-about-obvious-things" class="level3">
<h3 class="anchored" data-anchor-id="assumptions-about-obvious-things">2. Assumptions About “Obvious” Things</h3>
<p>We assumed certain things were obvious (like how to install from GitHub, where documentation links should point) but peer review showed these weren’t obvious at all.</p>
<p><strong>What to reduce:</strong> Making assumptions about what users know.</p>
<p><strong>Better approach:</strong> Test all instructions as if we’re a brand new user who knows nothing about the project.</p>
</section>
<section id="late-documentation-fixes" class="level3">
<h3 class="anchored" data-anchor-id="late-documentation-fixes">3. Late Documentation Fixes</h3>
<p>We didn’t catch documentation issues (broken links, wrong installation instructions) until peer review pointed them out.</p>
<p><strong>What to reduce:</strong> Treating documentation as an afterthought.</p>
<p><strong>Better approach:</strong> Verify all documentation claims actually work before considering something “done.”</p>
<hr>
</section>
</section>
<section id="more-of-what-do-we-want-to-see-more-of" class="level2">
<h2 class="anchored" data-anchor-id="more-of-what-do-we-want-to-see-more-of">More Of: What do we want to see more of?</h2>
<section id="comprehensive-testing" class="level3">
<h3 class="anchored" data-anchor-id="comprehensive-testing">1. Comprehensive Testing</h3>
<p>We wrote about 10 unit tests, which covered basic functionality but missed some edge cases that peer review identified.</p>
<p><strong>What we want more of:</strong> More extensive test coverage, including edge cases and integration tests.</p>
<p><strong>How to achieve:</strong> Set coverage goals (e.g., &gt;80%), write tests before or alongside code, include edge case testing.</p>
</section>
<section id="user-perspective-in-development" class="level3">
<h3 class="anchored" data-anchor-id="user-perspective-in-development">2. User Perspective in Development</h3>
<p>Peer review revealed several usability issues (complex import paths, broken links) that we didn’t notice because we were too close to the project.</p>
<p><strong>What we want more of:</strong> Regular “fresh eyes” checks on documentation and user experience.</p>
<p><strong>How to achieve:</strong> Have someone unfamiliar with the project try following the README, test installation on a clean environment.</p>
</section>
<section id="proactive-issue-prevention" class="level3">
<h3 class="anchored" data-anchor-id="proactive-issue-prevention">3. Proactive Issue Prevention</h3>
<p>Most of our fixes came from reacting to peer review feedback rather than catching issues ourselves first.</p>
<p><strong>What we want more of:</strong> Catching issues before external review.</p>
<p><strong>How to achieve:</strong> Use automated tools (linters, link checkers), create checklists for common issues, test in clean environments.</p>
<hr>
</section>
</section>
<section id="stop-doing-whats-not-working-and-we-should-stop" class="level2">
<h2 class="anchored" data-anchor-id="stop-doing-whats-not-working-and-we-should-stop">Stop Doing: What’s not working and we should stop?</h2>
<section id="minimal-environment-specifications" class="level3">
<h3 class="anchored" data-anchor-id="minimal-environment-specifications">1. Minimal Environment Specifications</h3>
<p>Having an <code>environment.yml</code> with only Python and nothing else created problems for everyone trying to contribute or test.</p>
<p><strong>Why stop:</strong> Makes it impossible for others to reproduce our development environment.</p>
<p><strong>Replace with:</strong> Complete environment specifications including all dependencies, testing tools, and documentation tools.</p>
</section>
<section id="writing-documentation-after-implementation" class="level3">
<h3 class="anchored" data-anchor-id="writing-documentation-after-implementation">2. Writing Documentation After Implementation</h3>
<p>We wrote code first, then tried to document it afterward, which led to documentation that didn’t always match reality or user needs.</p>
<p><strong>Why stop:</strong> Results in documentation that’s an afterthought rather than a guide.</p>
<p><strong>Replace with:</strong> Documentation-first or alongside-code approach. If we can’t explain what a function does before writing it, we probably don’t understand it well enough.</p>
</section>
<section id="manual-verification-of-changes" class="level3">
<h3 class="anchored" data-anchor-id="manual-verification-of-changes">3. Manual Verification of Changes</h3>
<p>We relied on manual testing to verify changes worked, which led to missing issues in different environments or scenarios.</p>
<p><strong>Why stop:</strong> Manual testing is incomplete and inconsistent.</p>
<p><strong>Replace with:</strong> Rely more on automated testing, add more test cases to catch issues automatically.</p>
<hr>
</section>
</section>
<section id="start-doing-what-new-things-should-we-try-out" class="level2">
<h2 class="anchored" data-anchor-id="start-doing-what-new-things-should-we-try-out">Start Doing: What new things should we try out?</h2>
<section id="code-quality-tools" class="level3">
<h3 class="anchored" data-anchor-id="code-quality-tools">1. Code Quality Tools</h3>
<p><strong>What:</strong> Implement automated code formatting (black or ruff) and linting.</p>
<p><strong>Why:</strong> Would eliminate style discussions in code review, catch common bugs through static analysis.</p>
<p><strong>How to implement:</strong> Add to GitHub Actions, use pre-commit hooks for local enforcement.</p>
</section>
<section id="documentation-testing" class="level3">
<h3 class="anchored" data-anchor-id="documentation-testing">2. Documentation Testing</h3>
<p><strong>What:</strong> Verify all documentation examples actually work, check all links are valid.</p>
<p><strong>Why:</strong> Prevents documentation drift and broken links like we experienced.</p>
<p><strong>How to implement:</strong> Use doctest for code examples, automated link checkers in CI.</p>
</section>
<section id="complete-dependency-management" class="level3">
<h3 class="anchored" data-anchor-id="complete-dependency-management">3. Complete Dependency Management</h3>
<p><strong>What:</strong> Create comprehensive <code>environment.yml</code> and <code>requirements-dev.txt</code> files.</p>
<p><strong>Why:</strong> Makes it trivial for anyone to set up a working development environment.</p>
<p><strong>How to implement:</strong> List ALL dependencies including testing tools, documentation tools, and development utilities.</p>
</section>
<section id="user-testing-before-release" class="level3">
<h3 class="anchored" data-anchor-id="user-testing-before-release">4. User Testing Before Release</h3>
<p><strong>What:</strong> Have someone unfamiliar with the project follow the README on a fresh system.</p>
<p><strong>Why:</strong> Catches usability issues before they reach users or reviewers.</p>
<p><strong>How to implement:</strong> Make it part of the release checklist, rotate who does the “fresh install test.”</p>
</section>
<section id="type-hints-and-type-checking" class="level3">
<h3 class="anchored" data-anchor-id="type-hints-and-type-checking">5. Type Hints and Type Checking</h3>
<p><strong>What:</strong> Add type hints to function signatures and use mypy for type checking.</p>
<p><strong>Why:</strong> Catches a whole class of bugs at development time, makes code more self-documenting.</p>
<p><strong>How to implement:</strong> Add gradually, start with new code and public APIs.</p>
<hr>
</section>
</section>
<section id="key-lessons-learned" class="level2">
<h2 class="anchored" data-anchor-id="key-lessons-learned">Key Lessons Learned</h2>
<section id="technical-lessons" class="level3">
<h3 class="anchored" data-anchor-id="technical-lessons">Technical Lessons</h3>
<ol type="1">
<li><strong>Automation saves time and catches bugs</strong> - GitHub Actions workflows were invaluable</li>
<li><strong>Complete setup instructions are critical</strong> - Incomplete <code>environment.yml</code> caused real friction</li>
<li><strong>The public API matters</strong> - Deep import paths made our package seem harder to use than it was</li>
<li><strong>Multi-platform testing is essential</strong> - Found issues on Windows that didn’t show up on Mac</li>
</ol>
</section>
<section id="process-lessons" class="level3">
<h3 class="anchored" data-anchor-id="process-lessons">Process Lessons</h3>
<ol type="1">
<li><strong>Fresh perspectives are invaluable</strong> - Peer review caught issues we were blind to</li>
<li><strong>Documentation is part of the product</strong> - Not an afterthought, needs same care as code</li>
<li><strong>Small oversights compound</strong> - Missing pytest dependency, broken links, wrong instructions all created friction</li>
<li><strong>Test like a user, not like a developer</strong> - We knew the workarounds, users don’t</li>
</ol>
</section>
<section id="team-lessons" class="level3">
<h3 class="anchored" data-anchor-id="team-lessons">Team Lessons</h3>
<ol type="1">
<li><strong>Clear ownership works well</strong> - Each person responsible for specific functions prevented conflicts</li>
<li><strong>Code review shares knowledge</strong> - Everyone learned about the full codebase through reviews</li>
<li><strong>Communication prevents problems</strong> - Discussing approach before implementing saved rework</li>
</ol>
<hr>
</section>
</section>
<section id="action-items-for-future-projects" class="level2">
<h2 class="anchored" data-anchor-id="action-items-for-future-projects">Action Items for Future Projects</h2>
<p><strong>Immediate (Do from project start):</strong> - [ ] Create complete <code>environment.yml</code> with all dependencies - [ ] Write documentation alongside or before code - [ ] Test installation instructions on clean environment - [ ] Verify all links in documentation actually work</p>
<p><strong>Short-term (Add within first week):</strong> - [ ] Set up automated code formatting - [ ] Implement linting in CI - [ ] Add more comprehensive test coverage - [ ] Create pre-commit hooks</p>
<p><strong>Medium-term (As project matures):</strong> - [ ] Add type hints to public API - [ ] Implement automated link checking - [ ] Set up performance benchmarking - [ ] Create contribution checklist</p>
<hr>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>The most important insight from this project: <strong>Small details matter tremendously for user experience.</strong> Things that seem minor to us as developers—a missing dependency, a broken link, a complex import path—create real friction for users and contributors.</p>
<p>The tools and automation we put in place (GitHub Actions, automated documentation, pull request workflow) worked excellently. The gaps were in completeness—complete dependency specifications, complete testing, complete documentation verification.</p>
<p>For future projects, we should: 1. <strong>Assume nothing is obvious</strong> - Test everything from a fresh user’s perspective 2. <strong>Automate quality checks</strong> - Don’t rely on manual verification 3. <strong>Invest in setup upfront</strong> - Complete environment files, comprehensive testing, thorough documentation 4. <strong>Treat documentation as code</strong> - Same rigor, same review process, same testing</p>
<p>These aren’t complex lessons, but they’re important ones. The difference between a frustrating package and a pleasant one often comes down to these details.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>